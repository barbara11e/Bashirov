# Bashirov
_Данный репозиторий предназначен для учебного исследовательского проекта P&B_

_Разрабатывали Войсят Юлия, Крючкова Ксения, Злобин Павел, Егорова Варвара_

## Постановка задачи

Необходимо разработать алгоритмическое и программное обеспечение для анализа специфических данных с целью выявления закономерностей 
и выбросов в этих данных для дальнейшего использования в качестве инструментов поиска.
Входными данными данной задачи являются полученные документы из разных источников, таких как сайты бронирования, 
форумы часто летающих пассажиров, агентства по продаже билетов и т. д. о рейсах нескольких подозрительных граждан России.
Программная реализация алгоритма должна включать в себя автоматизированные инструменты поиска аномалий и выбросов в 
некотором структурированном наборе данных, полученном из базы данных, структура и данные которой получены непосредственно 
по имеющимся входным данным.

## Алгоритм решения задачи

Для решения поставленной задачи данные были представлены в структурированном виде и нормализованы. 
Далее путем мозгового штурма были отобраны идеи выявления аномальных и подозрительных данных. 
Все идеи были разделены по характеру данных, а затем реализованы путем создания запросов и обработкой данных 
специальными инструментами для работы с данными.

1. Изучение исходных данных, аналитический обзор предметной области
2. Анализ данных и обсуждение поиска выявлений аномалий
3. Создание ER-диаграммы
4. Приведение данных к единому формату – csv, а также настройка полей по единому шаблону
5. Создание структуры БД
6. Импорт данных в БД
7. Создание плана реализации идей, разработанных экспертной группой
8. Реализация идей: создание скриптов
9. Представление результатов в наглядном виде (диаграммы, схемы)
Изучение исходных данных, аналитический обзор предметной области

## Анализ данных и обобщение схемы выявлений аномалий

Анализ данных и выработка эффективных, а главное аргументированных методов обнаружения аномалий и нехарактерных 
отклонений является ключевой задачей проекта. Исследование имеющейся информации показало, что аномалии могут отражать 
несколько основных типов выбросов:

1. Несоответствие действий человека нормам, принятым в его социальной, этнической или религиозной группе.
2. Нестандартное или неестественное (нехарактерное) поведение человека
3. Нестандартная окружающая обстановка

## Создание ER-диаграммы

При анализе предменой области были выявлены следующие стержневые сущности: Пассажир, Полет

![Рисунок 1 - Стержневые сущности](https://paper-attachments.dropbox.com/s_A865BC8FB26CDA8F59432BB172391E7F2DD033C106C82C9D54EED6F6FEA390F5_1576967388384_image.png)

Далее после нормализации были получены следующие сущности базы данных:

1. Пассажир
2. Полет
3. Билет (4 НФ) – после уничтожения связи M:M
4. Рейс (4 НФ) – после уничтожения связи M:M
5. Самолет (3 НФ) – таблица-справочник
6. Аэропорт (3 НФ) – таблица-справочник
7. Тариф (3 НФ)
8. Агрегатор (3 НФ) – таблица-справочник
9. Еда (3 НФ) – таблица-справочник
10. Бонусная программа (3 НФ)

Логическая модель информационной базы представлена на риcунке

![Рисунок 2 - ER-диаграмма](https://paper-attachments.dropbox.com/s_A865BC8FB26CDA8F59432BB172391E7F2DD033C106C82C9D54EED6F6FEA390F5_1576967161874_ERModel.png)

## Приведение данных к единому формату

Все исходные данные изначально представлены в виде файлов разного формата: json, xml, pdf, csv, tab, yaml, xlsx. 
Для удобства импорта данных в базу данных было решено выбрать единый формат, предполагающий наличие разделителей – csv.
Таким образом, каждый файл был преобразован в csv формат. Для некоторых были написаны скрипты на языке Python, 
где при помощи регулярных выражений по шаблону вычленялись необходимые поля. Некоторые файлы, например, tab, 
был преобразован непосредственно в Excel – при помощи функций и с использованием масок.
В каждом файле дата была преобразована в формат “##.##.####”. Имя, фамилия и отчество разбиты на отдельные колонки (1 НФ)
Все использованные скрипты, а также файлы в формате csv расположены в репозитории

## Создание структуры БД

По представленной ER-диаграмме была создана база данных. Скрипт для базы написан на языке SQL. 
Развертывание базы выполнено в среде PostgreSQL 12
Cкрипт по созданию БД расположен в репозитории

## Импорт данных в БД

Импорт данных в БД был выполнен путем развертывания csv-файлов в среде PostgreSQL 12. 
Дальнейшие манипуляции с данными по разбиению данных на таблицы выполнены при помощи SQL-запросов.

Актуальный код, документация и отчетность можно найти по [ссылке](https://github.com/barbara11e/Bashirov) в репозитории
